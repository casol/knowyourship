{% extends "core/draft/index.html" %}
{% load staticfiles %}

{% block maps %}
<h1>FIND ME!</h1>
<h3> here you have all ships museum in country you are in!</h3>

<form action="" method="GET">
    <input type="text" id="location" name="query" />
    <input type="submit" value="Search">
</form>

<h3>test results query search</h3>
{% for result in results %}
    {% with ship=result.object %}
        <p>{{ ship.ship }}</p>
    {% endwith %}
{% endfor %}

<h3>test submitted query search</h3>
<p>{{ query }}</p>

<h3>test geolocation script country</h3>
<p id="demo"></p>

<script>

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
            $.post("https://maps.googleapis.com/maps/api/geocode/json?latlng=" + position.coords.latitude + "," + position.coords.longitude + "&sensor=false", function (result) {
                for (var i = 0; i < result['results'][0]['address_components'].length; i++) {
                    if (result['results'][0]['address_components'][i]['types'][0] == "country") {
                        alert(result['results'][0]['address_components'][i]['long_name']);
                        var pos = result['results'][0]['address_components'][i]['long_name'];
                    }
                }
            });
        });
    }
}

document.getElementById("location").value = getLocation();
</script>




{% endblock %}