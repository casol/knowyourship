{% extends "core/draft/index.html" %}
{% load staticfiles %}

{% block search %}
<div id="map"></div>
    {% if "query" in request.GET %}
    {% for result in results %}
        {% with ship=result.object %}
            <p>{{ ship.ship }}</p>
            <p><a href="{{ ship.get_absolute_url }}">{{ ship.ship }}</a></p>
            <script>
            var locations = [
            ['<a href="{{ ship.get_absolute_url }}">{{ ship.ship }}</a>', {{ ship.coordinates.latitude }}, {{ ship.coordinates.longitude }}, {{ forloop.counter }}]];
            </script>
             <script src="{% static 'core/js/google_maps.js' %}"></script>
        {% endwith %}
        {% for location in locations %}
            <p> {{ location }}</p>
        {% endfor %}
        {{ locations }}

    {% empty %}
        <p>There are no results for your query.</p>
    {% endfor %}

    {% else %}
    <h1>Search for ships</h1>
    <form action="." method="get">
        {{ form }}
        <input type="submit" value="Search">
    </form>
    <script>
     var locations = [
     ['{{ ship.ship }}', {{ ship.coordinates.latitude }}, {{ ship.coordinates.longitude }}, {{ forloop.counter }}]];
    </script>

      {% endif %}
{% endblock %}